---
phase: 04-cli-improvements
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - bin/lib/colors.js
  - package.json
  - package-lock.json
autonomous: true

must_haves:
  truths:
    - "Color palette module exists with semantic naming"
    - "Colors respect --no-color flag and NO_COLOR environment variable"
    - "commander and picocolors are installed as dependencies"
  artifacts:
    - path: "bin/lib/colors.js"
      provides: "Centralized color palette with semantic names"
      exports: ["queen", "colony", "worker", "success", "warning", "error", "info", "bold", "dim", "header", "isEnabled"]
    - path: "package.json"
      provides: "Dependencies include commander and picocolors"
      contains: ["commander", "picocolors"]
  key_links:
    - from: "bin/lib/colors.js"
      to: "picocolors"
      via: "require('picocolors')"
      pattern: "require\\('picocolors'\\)"
---

<objective>
Create centralized color palette module and install commander.js and picocolors dependencies.

Purpose: Establish the foundation for CLI improvements by creating a semantic color system and installing required dependencies.
Output: bin/lib/colors.js module with Aether brand colors, updated package.json with dependencies.
</objective>

<execution_context>
@~/.claude/cosmic-dev-system/workflows/execute-plan.md
@~/.claude/cosmic-dev-system/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-cli-improvements/04-CONTEXT.md
@.planning/phases/04-cli-improvements/04-RESEARCH.md

@/Users/callumcowie/repos/Aether/bin/lib/errors.js
@/Users/callumcowie/repos/Aether/bin/lib/logger.js
@/Users/callumcowie/repos/Aether/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install commander.js and picocolors dependencies</name>
  <files>package.json, package-lock.json</files>
  <action>
    Install commander ^12.x and picocolors ^1.x as production dependencies.

    Run: npm install commander@^12.0.0 picocolors@^1.0.0

    Verify both packages appear in package.json dependencies section (not devDependencies).

    If package-lock.json exists, ensure it is updated by the install command.
  </action>
  <verify>
    Run: npm ls commander picocolors
    Check package.json contains both dependencies
  </verify>
  <done>
    commander and picocolors are installed and listed in package.json dependencies
  </done>
</task>

<task type="auto">
  <name>Task 2: Create centralized color palette module</name>
  <files>bin/lib/colors.js</files>
  <action>
    Create bin/lib/colors.js with Aether brand semantic color palette.

    Requirements from RESEARCH.md Pattern 3 and CONTEXT.md decisions:
    - Detect --no-color flag in process.argv
    - Detect NO_COLOR environment variable
    - Use picocolors with createColors(false) when disabled

    Color palette (Aether brand):
    - queen: magenta (Queen ant)
    - colony: cyan (Colony/nest)
    - worker: yellow (Workers)
    - success: green
    - warning: yellow
    - error: red
    - info: blue
    - bold: bold text
    - dim: dim text
    - header: bold cyan (for headers)
    - isEnabled: function returning boolean

    Export all colors as functions that take string and return colored string.
    Export raw picocolors instance for advanced usage.

    Reference existing code style in bin/lib/errors.js and bin/lib/logger.js.
  </action>
  <verify>
    Run: node -e "const c = require('./bin/lib/colors.js'); console.log(c.success('test'), c.error('test'), c.queen('queen'), c.colony('colony')); console.log('enabled:', c.isEnabled());"
    Verify colors are applied and isEnabled returns correct boolean
  </verify>
  <done>
    bin/lib/colors.js exists with all semantic colors, respects --no-color and NO_COLOR
  </done>
</task>

</tasks>

<verification>
- [ ] commander ^12.x installed in package.json dependencies
- [ ] picocolors ^1.x installed in package.json dependencies
- [ ] bin/lib/colors.js exists with Aether brand palette
- [ ] Colors respect --no-color flag
- [ ] Colors respect NO_COLOR environment variable
- [ ] All semantic colors exported: queen, colony, worker, success, warning, error, info, bold, dim, header
- [ ] isEnabled() function works correctly
</verification>

<success_criteria>
- Dependencies installed and verified
- Color module created and functional
- NO_COLOR and --no-color both disable colors
- Module exports match specification
</success_criteria>

<output>
After completion, create `.planning/phases/04-cli-improvements/04-01-SUMMARY.md`
</output>
