---
phase: 11-visual-identity
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .aether/docs/caste-system.md
  - .aether/workers.md
  - CLAUDE.md
autonomous: true
requirements:
  - VIS-05

must_haves:
  truths:
    - "A developer can look up any caste emoji in exactly one file"
    - "The caste emoji for 'builder' is the same whether viewed in CLAUDE.md, workers.md, or used in code"
    - "All 22 castes have documented emojis with role descriptions"
  artifacts:
    - path: ".aether/docs/caste-system.md"
      provides: "Single source of truth for caste emoji definitions"
      min_lines: 50
    - path: "CLAUDE.md"
      contains: "See .aether/docs/caste-system.md"
  key_links:
    - from: "CLAUDE.md"
      to: ".aether/docs/caste-system.md"
      via: "reference"
      pattern: "caste-system.md"
    - from: ".aether/workers.md"
      to: ".aether/docs/caste-system.md"
      via: "reference"
      pattern: "caste-system.md"
---

<objective>
Create `.aether/docs/caste-system.md` as the single authoritative source for all caste emoji definitions, then update CLAUDE.md and workers.md to reference it instead of duplicating definitions.

Purpose: Eliminate the current 3-way inconsistency (CLAUDE.md, workers.md, aether-utils.sh) and provide a canonical reference for all caste emojis.
Output: One new canonical file, two updated reference files.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-visual-identity/11-CONTEXT.md
@.planning/phases/11-visual-identity/11-RESEARCH.md
@.aether/aether-utils.sh
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create canonical caste-system.md</name>
  <files>.aether/docs/caste-system.md</files>
  <action>
Create `.aether/docs/caste-system.md` as the single source of truth for caste emoji definitions.

Use the existing `get_caste_emoji()` function in `.aether/aether-utils.sh` (lines 89-115) as the authoritative source for emoji-to-caste mappings. The function contains the complete, accurate mapping.

Format the document as a Markdown table with columns: Caste, Emoji, Role, Name Patterns.

Include all 22 castes from the function:
- Queen: ğŸ‘‘ğŸœ (name patterns: Queen, QUEEN, queen)
- Builder: ğŸ”¨ğŸœ (name patterns: Builder, Bolt, Hammer, Forge, Mason, Brick, Anvil, Weld)
- Watcher: ğŸ‘ï¸ğŸœ (name patterns: Watcher, Vigil, Sentinel, Guard, Keen, Sharp, Hawk, Alert)
- Scout: ğŸ”ğŸœ (name patterns: Scout, Swift, Dash, Ranger, Track, Seek, Path, Roam, Quest)
- Colonizer: ğŸ—ºï¸ğŸœ (name patterns: Colonizer, Pioneer, Map, Chart, Venture, Explore, Compass, Atlas, Trek)
- Surveyor: ğŸ“ŠğŸœ (name patterns: Surveyor, Chart, Plot, Survey, Measure, Assess, Gauge, Sound, Fathom)
- Architect: ğŸ›ï¸ğŸœ (name patterns: Architect, Blueprint, Draft, Design, Plan, Schema, Frame, Sketch, Model)
- Chaos: ğŸ²ğŸœ (name patterns: Chaos, Probe, Stress, Shake, Twist, Snap, Breach, Surge, Jolt)
- Archaeologist: ğŸºğŸœ (name patterns: Archaeologist, Relic, Fossil, Dig, Shard, Epoch, Strata, Lore, Glyph)
- Oracle: ğŸ”®ğŸœ (name patterns: Oracle, Sage, Seer, Vision, Augur, Mystic, Sibyl, Delph, Pythia)
- Route-Setter: ğŸ“‹ğŸœ (name patterns: Route, route)
- Ambassador: ğŸ”ŒğŸœ (name patterns: Ambassador, Bridge, Connect, Link, Diplomat, Network, Protocol)
- Auditor: ğŸ‘¥ğŸœ (name patterns: Auditor, Review, Inspect, Examine, Scrutin, Critical, Verify)
- Chronicler: ğŸ“ğŸœ (name patterns: Chronicler, Document, Record, Write, Chronicle, Archive, Scribe)
- Gatekeeper: ğŸ“¦ğŸœ (name patterns: Gatekeeper, Guard, Protect, Secure, Shield, Depend, Supply)
- Guardian: ğŸ›¡ï¸ğŸœ (name patterns: Guardian, Defend, Patrol, Secure, Vigil, Watch, Safety, Security)
- Includer: â™¿ğŸœ (name patterns: Includer, Access, Inclusive, A11y, WCAG, Barrier, Universal)
- Keeper: ğŸ“šğŸœ (name patterns: Keeper, Archive, Store, Curate, Preserve, Knowledge, Wisdom, Pattern)
- Measurer: âš¡ğŸœ (name patterns: Measurer, Metric, Benchmark, Profile, Optimize, Performance, Speed)
- Probe: ğŸ§ªğŸœ (name patterns: Probe, Test, Excavat, Uncover, Edge, Case, Mutant)
- Tracker: ğŸ›ğŸœ (name patterns: Tracker, Debug, Trace, Follow, Bug, Hunt, Root)
- Weaver: ğŸ”„ğŸœ (name patterns: Weaver, Refactor, Restruct, Transform, Clean, Pattern, Weave)

Add a header explaining this is the canonical source and how to use it:
```markdown
# Caste System Reference

This is the **canonical source** for Aether caste emoji definitions.

- All commands and documentation should reference this file
- The `get_caste_emoji()` function in `aether-utils.sh` implements these mappings
- To add a new caste: update this file AND the function

## Display Format

Workers are displayed as: `{caste_emoji} {worker_name}`
Example: `ğŸ”¨ Hammer-42` (not "Hammer-42 (Builder)")
```
  </action>
  <verify>
    # Verify file exists and contains all castes
    test -f .aether/docs/caste-system.md && \
    grep -q "Builder.*ğŸ”¨" .aether/docs/caste-system.md && \
    grep -q "Watcher.*ğŸ‘ï¸" .aether/docs/caste-system.md && \
    grep -c "^|" .aether/docs/caste-system.md | grep -q "2[2-5]" && \
    echo "PASS: caste-system.md created with all castes"
  </verify>
  <done>File exists with all 22 castes documented in a consistent table format</done>
</task>

<task type="auto">
  <name>Task 2: Update CLAUDE.md to reference caste-system.md</name>
  <files>CLAUDE.md</files>
  <action>
Update CLAUDE.md to remove the duplicate caste table and replace with a reference to the canonical source.

Find the "Caste System" section (approximately lines 129-152) containing the table:
```
| Caste | Emoji | Role |
|-------|-------|------|
| builder | ğŸ”¨ | Implementation work |
...
```

Replace the entire table with a reference:
```markdown
## Caste System

Workers are assigned to castes based on task type.

**Display format:** `{caste_emoji} {worker_name}` (e.g., `ğŸ”¨ Hammer-42`)

For the complete caste reference with emojis and role descriptions, see `.aether/docs/caste-system.md`.
```

DO NOT modify any other sections. Preserve all other content exactly.
  </action>
  <verify>
    # Verify CLAUDE.md now references caste-system.md instead of duplicating
    grep -q "caste-system.md" CLAUDE.md && \
    ! grep -q "| builder | ğŸ”¨ | Implementation work" CLAUDE.md && \
    echo "PASS: CLAUDE.md references canonical source"
  </verify>
  <done>CLAUDE.md references caste-system.md instead of duplicating the table</done>
</task>

<task type="auto">
  <name>Task 3: Update workers.md to reference caste-system.md</name>
  <files>.aether/workers.md</files>
  <action>
Update `.aether/workers.md` to remove or replace the Visual Identity table (approximately lines 390-398) that duplicates caste emojis.

Find the Visual Identity section containing:
```
| Role | Emoji |
|------|-------|
| Builder | ğŸ”¨ |
| Watcher | ğŸ‘ï¸ |
...
```

Replace with a reference to the canonical source:
```markdown
### Visual Identity

Workers display as `{caste_emoji} {worker_name}` (e.g., `ğŸ”¨ Hammer-42`).

For complete caste emoji reference, see `.aether/docs/caste-system.md`.
```

DO NOT modify any other sections. Preserve all other content exactly.
  </action>
  <verify>
    # Verify workers.md references caste-system.md instead of duplicating
    grep -q "caste-system.md" .aether/workers.md && \
    ! grep -q "| Builder | ğŸ”¨ |" .aether/workers.md && \
    echo "PASS: workers.md references canonical source"
  </verify>
  <done>workers.md references caste-system.md instead of duplicating the table</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Run `grep -r "caste-system.md" .aether/ CLAUDE.md` to confirm references are in place
2. Verify no duplicate caste tables remain:
   - `grep -l "| Builder |" .aether/*.md .aether/docs/*.md CLAUDE.md` should only show caste-system.md
3. Run `npm run lint:sync` to verify no sync issues
</verification>

<success_criteria>
- `.aether/docs/caste-system.md` exists with all 22 castes documented
- CLAUDE.md references caste-system.md (no duplicate table)
- workers.md references caste-system.md (no duplicate table)
- `npm run lint:sync` passes
</success_criteria>

<output>
After completion, create `.planning/phases/11-visual-identity/11-01-SUMMARY.md`
</output>
