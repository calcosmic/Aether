---
phase: 07-advanced-workers
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - .aether/commands/claude/dream.md
  - .claude/commands/ant/dream.md
  - .aether/commands/opencode/dream.md
  - .aether/commands/claude/interpret.md
  - .claude/commands/ant/interpret.md
  - .aether/commands/opencode/interpret.md
autonomous: true
requirements: [ADV-04, ADV-05]

must_haves:
  truths:
    - "/ant:dream creates a dream journal file in .aether/dreams/"
    - "/ant:dream produces 5-8 dream observations with categories and plain-language explanations"
    - "/ant:interpret reads dream files and validates observations against codebase"
    - "/ant:interpret offers actionable choices via AskUserQuestion"
    - "OpenCode interpret.md has normalize-args adaptation"
  artifacts:
    - path: ".aether/commands/claude/dream.md"
      provides: "Dream command definition (source of truth)"
    - path: ".claude/commands/ant/dream.md"
      provides: "Dream command (Claude Code copy, identical to SoT)"
    - path: ".aether/commands/opencode/dream.md"
      provides: "Dream command (OpenCode copy, normalize-args adapted)"
    - path: ".aether/commands/claude/interpret.md"
      provides: "Interpret command definition (source of truth)"
    - path: ".claude/commands/ant/interpret.md"
      provides: "Interpret command (Claude Code copy, identical to SoT)"
    - path: ".aether/commands/opencode/interpret.md"
      provides: "Interpret command (OpenCode copy, normalize-args adapted)"
  key_links:
    - from: ".aether/commands/claude/dream.md"
      to: ".aether/dreams/"
      via: "Write tool creates dream journal files"
      pattern: "\\.aether/dreams/"
    - from: ".aether/commands/claude/interpret.md"
      to: ".aether/dreams/"
      via: "Read tool loads dream files for interpretation"
      pattern: "\\.aether/dreams/"
---

<objective>
Verify and fix Dream and Interpret commands, including adding missing OpenCode adaptation for Interpret.

Purpose: Dream and Interpret are paired -- dream writes philosophical observations, interpret validates them. Dream is already in sync but needs audit. Interpret has a known issue: the OpenCode copy is missing the normalize-args adaptation.
Output: Verified dream.md and interpret.md across all 3 locations, OpenCode interpret.md properly adapted
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.aether/commands/claude/dream.md
@.claude/commands/ant/dream.md
@.aether/commands/opencode/dream.md
@.aether/commands/claude/interpret.md
@.claude/commands/ant/interpret.md
@.aether/commands/opencode/interpret.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify Dream command and sync</name>
  <files>.aether/commands/claude/dream.md, .claude/commands/ant/dream.md, .aether/commands/opencode/dream.md</files>
  <action>
  Dream is already in sync between SoT and Claude Code. Verify and audit:

  1. **Read the source of truth** (`.aether/commands/claude/dream.md`) and audit:
     - Verify `swarm-display-init`, `swarm-display-update` references are correct
     - Verify `activity-log` syntax in Step 6
     - Verify Step 2 creates `.aether/dreams/` directory defensively (`mkdir -p .aether/dreams`)
     - Check the dream file naming pattern: `.aether/dreams/{YYYY-MM-DD-HHmm}.md`
     - Verify the dream journal template in Step 2 is coherent

  2. **Confirm Claude Code copy** matches source of truth (diff should show no differences).

  3. **Verify OpenCode copy** has correct adaptations:
     - Step -1 normalize-args block present
     - `$ARGUMENTS` replaced with `$normalized_args`
     - Any display function calls adapted per OpenCode conventions

  If dream SoT needs a defensive `mkdir -p .aether/dreams` added (it references `.aether/dreams/` directory in Step 2 for creating dream files, but may not explicitly create it), add it.

  Make any targeted fixes needed, or confirm everything is correct.
  </action>
  <verify>
  diff SoT vs Claude Code = identical.
  diff SoT vs OpenCode = only normalize-args differences.
  Dream command references correct aether-utils.sh functions.
  </verify>
  <done>Dream command verified and synced across all 3 locations</done>
</task>

<task type="auto">
  <name>Task 2: Fix Interpret OpenCode adaptation and verify</name>
  <files>.aether/commands/claude/interpret.md, .claude/commands/ant/interpret.md, .aether/commands/opencode/interpret.md</files>
  <action>
  Interpret has a known issue: the OpenCode copy is identical to the source of truth (missing normalize-args adaptation).

  1. **Read the source of truth** (`.aether/commands/claude/interpret.md`) and audit:
     - Verify it correctly reads from `.aether/dreams/` directory
     - Verify `activity-log` syntax in Step 7
     - Verify AskUserQuestion patterns in Step 5 are correct
     - Check that it reads `constraints.json` for existing pheromones (to avoid duplicates)
     - Verify FOCUS/REDIRECT pheromone injection in Step 6 references `constraints.json` correctly

  2. **Confirm Claude Code copy** matches source of truth (should be identical).

  3. **Fix OpenCode copy** (`.aether/commands/opencode/interpret.md`): Add the normalize-args adaptation following the established pattern:
     - Add Step -1 normalize-args block after the frontmatter/intro section
     - Replace `$ARGUMENTS` with `$normalized_args` throughout
     - Check if any swarm-display functions are used that need OpenCode adaptation (interpret doesn't use swarm display, but verify)

  The OpenCode adaptation pattern (from other commands):
  ```
  ### Step -1: Normalize Arguments

  Run: `normalized_args=$(bash .aether/aether-utils.sh normalize-args "$@")`

  This ensures arguments work correctly in both Claude Code and OpenCode. Use `$normalized_args` throughout this command.
  ```
  </action>
  <verify>
  diff SoT vs Claude Code = identical.
  diff SoT vs OpenCode = only normalize-args differences (Step -1 block + $ARGUMENTS -> $normalized_args).
  Interpret references correct file paths and functions.
  </verify>
  <done>Interpret command verified, OpenCode copy properly adapted with normalize-args</done>
</task>

</tasks>

<verification>
1. All 6 command files (3 per command) properly synced
2. Dream has defensive mkdir for .aether/dreams/ directory
3. Interpret OpenCode copy now has normalize-args adaptation
4. No broken function references in any copy
5. AskUserQuestion patterns in interpret are correct
</verification>

<success_criteria>
- /ant:dream command definition verified with correct function references
- /ant:interpret command definition verified with correct function references
- OpenCode interpret.md properly adapted with normalize-args (was previously missing)
- All 3 copies per command have only expected platform differences
</success_criteria>

<output>
After completion, create `.planning/phases/07-advanced-workers/07-03-SUMMARY.md`
</output>
