---
phase: 03-pheromone-communication
plan: 05
type: execute
wave: 2
depends_on: [03-01, 03-02, 03-03]
files_modified:
  - .aether/workers/watcher-ant.md
  - .aether/workers/scout-ant.md
  - .aether/workers/architect-ant.md
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Watcher Ant reads pheromones.json and interprets signals"
    - "Scout Ant reads pheromones.json and interprets signals"
    - "Architect Ant reads pheromones.json and interprets signals"
    - "Each Ant calculates effective strength (signal × sensitivity)"
    - "Each Ant adjusts behavior based on pheromone combinations"
  artifacts:
    - path: ".aether/workers/watcher-ant.md"
      provides: "Watcher Ant pheromone response logic"
      contains: "Pheromone reading and interpretation section"
    - path: ".aether/workers/scout-ant.md"
      provides: "Scout Ant pheromone response logic"
      contains: "Pheromone reading and interpretation section"
    - path: ".aether/workers/architect-ant.md"
      provides: "Architect Ant pheromone response logic"
      contains: "Pheromone reading and interpretation section"
  key_links:
    - from: ".aether/workers/*-ant.md"
      to: ".aether/data/pheromones.json"
      via: "Worker Ant reads active_pheromones array on task start"
      pattern: "cat.*pheromones\\.json|jq.*active_pheromones"
    - from: ".aether/workers/*-ant.md"
      to: ".aether/data/worker_ants.json"
      via: "Worker Ant reads own sensitivity_profile"
      pattern: "sensitivity_profile"
---

<objective>
Update Watcher, Scout, and Architect Ant prompts to read and respond to pheromone signals.

Purpose: Enable remaining Worker Ants to interpret pheromone signals, calculate effective strength, and adjust behavior based on caste-specific sensitivities
Output: Three Worker Ant prompts with pheromone reading and interpretation instructions
</objective>

<execution_context>
@~/.claude/cosmic-dev-system/workflows/execute-plan.md
@~/.claude/cosmic-dev-system/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.aether/data/pheromones.json
@.aether/data/worker_ants.json
@.aether/workers/builder-ant.md
@.planning/phases/03-pheromone-communication/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add pheromone response section to Watcher Ant</name>
  <files>.aether/workers/watcher-ant.md</files>
  <action>
    Add a new section "## Read Active Pheromones" after "## Your Sensitivity Profile" with the following content:

    ```markdown
    ## Read Active Pheromones

    Before starting work, read current pheromone signals:

    \`\`\`bash
    # Read pheromones
    cat .aether/data/pheromones.json
    \`\`\`

    ## Interpret Pheromone Signals

    Your caste (watcher) has these sensitivities:
    - INIT: 0.8 - Respond when validation is needed
    - FOCUS: 0.9 - Intensify testing in focused areas
    - REDIRECT: 1.0 - Strongly validate against redirected patterns
    - FEEDBACK: 1.0 - Adjust validation based on feedback

    For each active pheromone:

    1. **Calculate decay**:
       - INIT: No decay (persists until phase complete)
       - FOCUS: strength × 0.5^((now - created_at) / 3600)
       - REDIRECT: strength × 0.5^((now - created_at) / 86400)
       - FEEDBACK: strength × 0.5^((now - created_at) / 21600)

    2. **Calculate effective strength**:
       \`\`\`
       effective = decayed_strength × your_sensitivity
       \`\`\`

    3. **Respond if effective > 0.1**:
       - FOCUS > 0.5: Intensify testing in focused area
       - REDIRECT > 0.5: Validate against constraint strictly
       - FEEDBACK > 0.3: Adjust validation approach

    Example calculation:
      REDIRECT "avoid synchronous patterns" created 12 hours ago
      - strength: 0.9
      - hours: 12
      - decay: 0.5^(12/24) = 0.707
      - current: 0.9 × 0.707 = 0.636
      - watcher sensitivity: 1.0
      - effective: 0.636 × 1.0 = 0.636
      - Action: Strictly validate against synchronous patterns (0.636 > 0.5 threshold)

    ## Pheromone Combinations

    When multiple pheromones are active, combine their effects:

    FOCUS + FEEDBACK (quality):
    - Positive feedback: Standard validation
    - Quality feedback: Intensify testing in focused area
    - Add extra test cases for focused components

    INIT + REDIRECT:
    - Goal established, validate against constraints
    - Ensure implementation avoids redirected patterns
    - Flag any violations as critical issues

    Multiple FOCUS signals:
    - Prioritize validation by effective strength
    - Test highest-strength focus most thoroughly
    - Note lower-priority focuses for review
    ```

    This content should be inserted after the sensitivity profile table.
  </action>
  <verify>
    1. Read .aether/workers/watcher-ant.md
    2. Verify "## Read Active Pheromones" section exists
    3. Verify watcher sensitivity values are correct (INIT 0.8, FOCUS 0.9, REDIRECT 1.0, FEEDBACK 1.0)
    4. Verify decay and effective strength formulas present
  </verify>
  <done>Watcher Ant has pheromone reading instructions and can adjust validation based on signals</done>
</task>

<task type="auto">
  <name>Task 2: Add pheromone response section to Scout Ant</name>
  <files>.aether/workers/scout-ant.md</files>
  <action>
    Add the same "## Read Active Pheromones" section to Scout Ant, with caste-specific sensitivities:

    Your caste (scout) has these sensitivities:
    - INIT: 0.9 - Respond when information gathering is needed
    - FOCUS: 0.7 - Research focused areas
    - REDIRECT: 0.8 - Avoid researching redirected patterns
    - FEEDBACK: 0.8 - Adjust research based on feedback

    Use the same decay calculation, effective strength formula, and pheromone combinations sections.

    Example calculation should show:
      FOCUS "WebSocket security" created 30min ago
      - effective: 0.495 × 0.7 = 0.347 (scout sensitivity)
      - Action: Research WebSocket security first (0.347 > 0.3 threshold)

    This content should be inserted after the sensitivity profile table.
  </action>
  <verify>
    1. Read .aether/workers/scout-ant.md
    2. Verify "## Read Active Pheromones" section exists
    3. Verify scout sensitivity values are correct (INIT 0.9, FOCUS 0.7, REDIRECT 0.8, FEEDBACK 0.8)
    4. Verify decay and effective strength formulas present
  </verify>
  <done>Scout Ant has pheromone reading instructions and can adjust research based on signals</done>
</task>

<task type="auto">
  <name>Task 3: Add pheromone response section to Architect Ant</name>
  <files>.aether/workers/architect-ant.md</files>
  <action>
    Add the same "## Read Active Pheromones" section to Architect Ant, with caste-specific sensitivities:

    Your caste (architect) has these sensitivities:
    - INIT: 0.8 - Respond when memory compression is needed
    - FOCUS: 0.8 - Extract patterns from focused areas
    - REDIRECT: 0.9 - Record avoidance patterns
    - FEEDBACK: 1.0 - Strongly adjust based on feedback

    Use the same decay calculation, effective strength formula, and pheromone combinations sections.

    Example calculation should show:
      FEEDBACK "great progress on API" created 2 hours ago
      - strength: 0.5
      - hours: 2
      - decay: 0.5^(2/6) = 0.794
      - current: 0.5 × 0.794 = 0.397
      - architect sensitivity: 1.0
      - effective: 0.397 × 1.0 = 0.397
      - Action: Record positive pattern for reuse (0.397 > 0.3 threshold)

    This content should be inserted after the sensitivity profile table.
  </action>
  <verify>
    1. Read .aether/workers/architect-ant.md
    2. Verify "## Read Active Pheromones" section exists
    3. Verify architect sensitivity values are correct (INIT 0.8, FOCUS 0.8, REDIRECT 0.9, FEEDBACK 1.0)
    4. Verify decay and effective strength formulas present
  </verify>
  <done>Architect Ant has pheromone reading instructions and can adjust memory operations based on signals</done>
</task>

</tasks>

<verification>
After completion, verify:
1. All three Worker Ant prompts have "## Read Active Pheromones" section
2. Each caste has correct sensitivity values from worker_ants.json
3. Decay calculation formulas are present for all pheromone types
4. Effective strength calculation (signal × sensitivity) is documented
5. Pheromone combination logic is documented
6. Response thresholds (>0.1, >0.3, >0.5) are specified
</verification>

<success_criteria>
Watcher, Scout, and Architect Ants can read pheromones.json, calculate effective strength based on their caste sensitivity, and adjust their behavior accordingly
</success_criteria>

<output>
After completion, create `.planning/phases/03-pheromone-communication/03-05-SUMMARY.md`
</output>
