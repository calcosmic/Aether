---
phase: 37-command-trim-utilities
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/commands/ant/focus.md
  - .claude/commands/ant/redirect.md
  - .claude/commands/ant/feedback.md
autonomous: true

must_haves:
  truths:
    - "Signal commands emit valid signals to COLONY_STATE.json"
    - "Commands confirm emission with one-line output"
    - "Content validation still prevents oversized signals"
  artifacts:
    - path: ".claude/commands/ant/focus.md"
      provides: "FOCUS signal emission"
      max_lines: 45
    - path: ".claude/commands/ant/redirect.md"
      provides: "REDIRECT signal emission"
      max_lines: 45
    - path: ".claude/commands/ant/feedback.md"
      provides: "FEEDBACK signal emission"
      max_lines: 45
  key_links:
    - from: "signal commands"
      to: "COLONY_STATE.json signals array"
      via: "JSON append"
      pattern: "signals.*append"
---

<objective>
Reduce signal commands (focus, redirect, feedback) from ~100 lines each to ~40 lines each.

Purpose: Remove verbose output templates and sensitivity matrix references that were obsoleted by Phase 36 TTL migration.
Output: Three lean signal commands with one-line confirmation output.
</objective>

<execution_context>
@~/.claude/cosmic-dev-system/workflows/execute-plan.md
@~/.claude/cosmic-dev-system/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/37-command-trim-utilities/37-CONTEXT.md
@.planning/phases/37-command-trim-utilities/37-RESEARCH.md

# Source files to reduce
@.claude/commands/ant/focus.md
@.claude/commands/ant/redirect.md
@.claude/commands/ant/feedback.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Reduce focus.md to ~40 lines</name>
  <files>.claude/commands/ant/focus.md</files>
  <action>
Rewrite focus.md following this structure:

```markdown
---
name: ant:focus
description: Emit FOCUS signal to guide colony attention
---

You are the **Queen**. Emit a FOCUS signal.

## Instructions

The focus area is: `$ARGUMENTS`

### Step 1: Validate
If `$ARGUMENTS` empty -> show usage: `/ant:focus <area>`, stop.
If content > 500 chars -> "Signal content too long (max 500 chars)", stop.

### Step 2: Read + Update State
Read `.aether/data/COLONY_STATE.json`.
If `goal: null` -> "No colony initialized.", stop.

Generate ISO-8601 timestamp.
Append to `signals` array:
{
  "id": "focus_<timestamp_ms>",
  "type": "FOCUS",
  "content": "<focus area>",
  "priority": "normal",
  "created_at": "<ISO-8601>",
  "expires_at": "phase_end"
}

Write COLONY_STATE.json.

### Step 3: Confirm
Output single line: `FOCUS signal emitted: "<content preview>" (expires: phase_end)`
```

Remove:
- ASCII art headers
- Sensitivity matrix displays
- Step-by-step checkmarks
- Verbose response templates
- Source call to aether-utils.sh (validation is inline now)
  </action>
  <verify>wc -l .claude/commands/ant/focus.md shows <= 45 lines</verify>
  <done>focus.md reduced to ~40 lines with one-line confirmation output</done>
</task>

<task type="auto">
  <name>Task 2: Reduce redirect.md and feedback.md</name>
  <files>.claude/commands/ant/redirect.md, .claude/commands/ant/feedback.md</files>
  <action>
Apply same pattern as focus.md to redirect.md and feedback.md:

For redirect.md:
- type: "REDIRECT"
- priority: "high" (REDIRECT signals are high priority per Phase 36 design)
- Same structure as focus.md

For feedback.md:
- type: "FEEDBACK"
- priority: "low" (FEEDBACK signals are low priority per Phase 36 design)
- Same structure as focus.md

Both should:
- Validate arguments (empty, length)
- Check colony initialized
- Append to signals array with proper type/priority
- Output single confirmation line

Remove from both:
- ASCII art headers
- Sensitivity matrix displays
- Step-by-step checkmarks
- Verbose response templates
  </action>
  <verify>wc -l .claude/commands/ant/redirect.md .claude/commands/ant/feedback.md shows <= 45 lines each</verify>
  <done>redirect.md and feedback.md reduced to ~40 lines each with correct priority levels</done>
</task>

</tasks>

<verification>
- [ ] All three signal commands <= 45 lines
- [ ] Each command validates arguments and content length
- [ ] Each command appends to COLONY_STATE.json signals array
- [ ] focus.md uses priority: "normal"
- [ ] redirect.md uses priority: "high"
- [ ] feedback.md uses priority: "low"
- [ ] One-line confirmation output format used
- [ ] No sensitivity matrix references remain
</verification>

<success_criteria>
Signal commands reduced from ~300 total lines to ~120 total lines (~60% reduction).
Commands still emit valid TTL-based signals with appropriate priority levels.
</success_criteria>

<output>
After completion, create `.planning/phases/37-command-trim-utilities/37-01-SUMMARY.md`
</output>
