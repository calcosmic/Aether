---
phase: 02-core-infrastructure
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - bin/cli.js
  - .claude/commands/ant/resume.md
autonomous: true
requirements:
  - CMD-07
  - CMD-08
  - ERR-03

must_haves:
  truths:
    - "aether status CLI command shows colony dashboard"
    - "/ant:resume command is registered with proper frontmatter"
    - "Error messages from CLI are user-friendly"
  artifacts:
    - path: "bin/cli.js"
      provides: "status command"
      contains: ".command('status')"
    - path: ".claude/commands/ant/resume.md"
      provides: "resume command frontmatter"
      contains: "^name: resume"
  key_links:
    - from: "aether status"
      to: "COLONY_STATE.json"
      via: "file read"
      pattern: "loadColonyState"
---

<objective>
Add aether status CLI command and fix resume.md frontmatter.

Purpose: Required for /ant:status (CMD-07) to show colony dashboard. Currently the CLI status command doesn't exist, and resume.md is missing YAML frontmatter needed for proper command registration.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-infrastructure/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Add aether status CLI command</name>
  <files>bin/cli.js</files>
  <action>
1. Find where other CLI commands are defined (search for .command('nestmates'))
2. Add status command following Commander.js pattern:
   - .command('status')
   - .description('Show colony status')
   - .option('-j, --json', 'Output as JSON')
   - .action(async (options) => { ... })

3. Implementation should:
   - Load COLONY_STATE.json using existing loadColonyState function
   - If --json flag: output raw JSON
   - Otherwise: format as dashboard with goal, phase, progress

Reference .planning/phases/02-core-infrastructure/02-RESEARCH.md lines 277-292 for code example.
  </action>
  <verify>
grep -n "\.command('status')" bin/cli.js
  </verify>
  <done>aether status command is registered in CLI</done>
</task>

<task type="auto">
  <name>Add YAML frontmatter to resume.md</name>
  <files>.claude/commands/ant/resume.md</files>
  <action>
1. Read first 10 lines of .claude/commands/ant/resume.md
2. Add YAML frontmatter at top (before any content):
   ---
   name: resume
   description: Resume Previous Session
   symbol: refresh
   ---

3. Keep existing content below the frontmatter
  </action>
  <verify>
head -7 .claude/commands/ant/resume.md | grep -A3 "^---"
  </verify>
  <done>resume.md has YAML frontmatter with name, description, symbol</done>
</task>

<task type="auto">
  <name>Test aether status command</name>
  <files>bin/cli.js</files>
  <action>
1. Run: node bin/cli.js status
2. Verify it shows status or handles missing colony gracefully
3. Run: node bin/cli.js status --json
4. Verify JSON output is valid
  </action>
  <verify>
node bin/cli.js status --json | jq empty 2>/dev/null && echo "Valid JSON"
  </verify>
  <done>aether status outputs valid dashboard or JSON</done>
</task>

</tasks>

<verification>
Run: node bin/cli.js status
Verify output shows colony information or graceful error message.
</verification>

<success_criteria>
1. aether status command exists and runs
2. aether status --json returns valid JSON
3. resume.md has YAML frontmatter
4. Error messages are user-friendly when colony doesn't exist
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-infrastructure/02-05-SUMMARY.md`
</output>
