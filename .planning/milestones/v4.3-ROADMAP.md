# Milestone v4.3: Live Visibility & Auto-Learning

**Status:** ✅ SHIPPED 2026-02-04
**Phases:** 25-26
**Total Plans:** 4

## Overview

v4.3 addresses two gaps found during codebase analysis: (1) workers output progress markers but they're invisible to users because Task tool subagents don't stream output — fixed by having the Queen orchestrate spawns directly and display results incrementally; (2) learning extraction requires a manual `/ant:continue` call that's easy to forget — fixed by auto-extracting learnings in build.md Step 7.

## Phases

### Phase 25: Live Visibility

**Goal**: Users see what each worker did as it completes, not after the entire Phase Lead returns — workers write to activity log, Queen spawns workers directly and displays results incrementally
**Depends on**: Phase 24 (v4.2 complete)
**Requirements**: VIS-01, VIS-02, VIS-03
**Plans**: 3 plans

Plans:
- [x] 25-01: Activity log subcommands in aether-utils.sh
- [x] 25-02: Activity log instructions in all 6 worker specs
- [x] 25-03: Restructure build.md: Phase Lead as planner, Queen as executor

**Success Criteria (all met):**
1. Workers write structured progress lines to `.aether/data/activity.log` with timestamps, caste emoji, and action type
2. build.md spawns workers sequentially through the Queen (not delegated to Phase Lead) so each worker's results are visible before the next spawns
3. After each worker returns, the Queen displays that worker's activity log entries and result summary to the user
4. The Phase Lead role changes from "spawn and manage all workers" to "plan task assignments" — execution moves to Queen level
5. Activity log is cleared at phase start to prevent stale data

**Key Decisions:**
- Activity log uses append-only plaintext (not JSON) for simplicity
- No action validation on activity-log subcommand — flexible for future action types
- Phase Lead prompt is planning-only — explicitly forbidden from Task tool and spawning
- User plan checkpoint with max 3 iterations before auto-proceeding
- Workers spawned at depth 1 by Queen, spawn tracking is deterministic

**Completed:** 2026-02-04

### Phase 26: Auto-Learning

**Goal**: Phase learnings are automatically captured at the end of build execution — no manual `/ant:continue` required for learning extraction
**Depends on**: Phase 25
**Requirements**: LEARN-01, LEARN-02, LEARN-03
**Plans**: 1 plan

Plans:
- [x] 26-01: Auto-learning in build.md Step 7 + duplicate detection in continue.md

**Success Criteria (all met):**
1. build.md Step 7 reads errors.json, events.json, and task outcomes, then synthesizes actionable learnings and appends to memory.json
2. build.md Step 7 auto-emits a FEEDBACK pheromone summarizing what worked/failed, validated via pheromone-validate before writing
3. continue.md detects whether learnings were already extracted and skips extraction if so
4. Learning extraction in build.md respects existing memory-compress limits (20 learnings max)

**Key Decisions:**
- Use events.json auto_learnings_extracted event as cross-command flag
- Phase-specific content matching prevents stale flag detection
- --force override supported for manual re-extraction in continue.md

**Completed:** 2026-02-04

---

## Milestone Summary

**Key Decisions:**
- Activity log is append-only plaintext, not JSON — simpler than structured state files
- No action validation on activity-log subcommand — flexible for future action types
- Phase Lead prompt is planning-only — explicitly forbidden from Task tool usage
- User plan checkpoint with max 3 iterations before auto-proceeding
- Workers spawned at depth 1 (by Queen), not depth 2 (by Phase Lead)
- Spawn outcome tracking is deterministic — Queen knows exactly which castes it spawned
- Use events.json auto_learnings_extracted event as flag (not separate file)
- Phase-specific matching in content field prevents stale flag matches
- Support --force override in continue.md for manual re-extraction

**Issues Resolved:**
- Workers output progress markers but invisible until Phase Lead returns — solved by Queen-level sequential execution with activity log display
- Learning extraction requires manual /ant:continue — solved by auto-extraction in build.md Step 7

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- continue.md Step 6 writes learnings_extracted event unconditionally even when Step 4 was skipped (cosmetic, low severity)
- continue.md Step 8 display template lacks skip-case guidance for when Step 4 skipped (LLM handles contextually, low severity)

---

_For current project status, see .planning/ROADMAP.md_
