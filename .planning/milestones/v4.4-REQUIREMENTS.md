# Requirements Archive: v4.4 Colony Hardening & Real-World Readiness

**Archived:** 2026-02-05
**Status:** SHIPPED

This is the archived requirements specification for v4.4.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Aether v4.4

**Defined:** 2026-02-04
**Core Value:** Stigmergic Emergence — Worker Ants detect capability gaps and spawn specialists through pheromone-guided coordination

## v1 Requirements

Requirements for v4.4 Colony Hardening & Real-World Readiness. Each maps to roadmap phases.

### Bug Fixes

- [x] **BUG-01**: Pheromone decay math produces correct decreasing strength over time (FOCUS strength no longer grows) — *Validated: Three-guard decay pattern in pheromone-decay, pheromone-batch, pheromone-cleanup*
- [x] **BUG-02**: Activity log appends across phases instead of overwriting (Phases 1-N entries preserved) — *Validated: cp + >> pattern in activity-log-init*
- [x] **BUG-03**: Errors logged to errors.json include phase attribution field — *Validated: Optional 4th arg to error-add with regex validation*
- [x] **BUG-04**: Decisions made during execution phases are recorded in memory.json decisions array — *Validated: Two logging points in build.md (strategic + quality)*

### Critical UX

- [x] **UX-01**: Every command that completes meaningful work prompts user with "safe to /clear" after verifying state persistence — *Validated: build.md Step 7f, continue.md Step 9, colonize.md Step 8*
- [x] **UX-02**: Auto-continue mode (`/ant:continue --all`) runs remaining phases without manual approval at each boundary — *Validated: Task tool delegation with quality-gated halt*

### Colony Intelligence

- [x] **INT-01**: Colonize command spawns multiple ants that review codebase independently and synthesize findings — *Validated: 3 colonizers (Structure/Patterns/Stack) with Queen-level synthesis*
- [x] **INT-02**: Tasks touching the same file are assigned to the same worker by Phase Lead during planning — *Validated: Two-layer defense (prompt rule + Queen backup validation)*
- [x] **INT-03**: Phase Lead assigns independent tasks to parallel waves more aggressively — *Validated: DEFAULT-PARALLEL RULE + parallelism percentage output*
- [x] **INT-04**: Phase Lead auto-approves plans for phases below a complexity threshold — *Validated: Tiered by LIGHTWEIGHT/STANDARD/FULL mode*
- [x] **INT-05**: Watcher scoring rubric produces meaningfully varied scores (not flat 8/10) — *Validated: 5-dimension weighted rubric with anchors and chain-of-thought*
- [x] **INT-06**: Tech debt report generated at project completion aggregating cross-phase persistent issues — *Validated: continue.md Step 2.5 conditional on no-next-phase*
- [x] **INT-07**: Colony adapts overhead to project complexity (LIGHTWEIGHT/STANDARD/FULL mode) — *Validated: colonize.md Step 2.5 detection → COLONY_STATE.json → build.md consumption at 5 points*

### Automation

- [x] **AUTO-01**: Reviewer ant auto-spawns after builder waves (advisory only, severity-gated, max 2 iterations) — *Validated: build.md Step 5c.i reusing watcher-ant.md*
- [x] **AUTO-02**: Debugger ant auto-spawns on test failure — *Validated: build.md Step 5c.f2 reusing builder-ant.md with PATCH constraints*
- [x] **AUTO-03**: Pheromone recommendations surfaced to user after builds (e.g. "Recommended: /ant:focus ...") — *Validated: build.md Step 7e with max 3 recommendations*
- [x] **AUTO-04**: Animated build indicators with ANSI progress bars and caste-colored output — *Validated: 13 bash printf calls in build.md, 23 in colonize.md*
- [x] **AUTO-05**: Colonizer command has visual output with emojis and progress markers — *Validated: Box header, colonizer progress, synthesis indicator, checkmarks in colonize.md*

### Architecture

- [x] **ARCH-01**: Two-tier learning system — project-local (memory.json) + global (~/.aether/learnings.json) with manual promotion — *Validated: learning-promote/learning-inject subcommands + continue.md Step 2.5b promotion UX + colonize.md Step 5.5 injection*
- [x] **ARCH-02**: Spawn tree engine — workers signal sub-spawn needs, Queen fulfills (Queen-mediated recursive delegation with depth limit 2) — *Validated: build.md spawn tree engine + all 6 worker specs updated + depth enforcement*
- [x] **ARCH-03**: Adaptive complexity mode set at colonization time via mode field in COLONY_STATE.json — *Validated: colonize.md Step 2.5 detection + Step 7 persistence*

### Flow & Documentation

- [x] **FLOW-01**: Pheromone-first flow — colonize suggests pheromone injection before planning — *Validated: colonize.md Step 6 with CRITICAL derivation constraint*
- [x] **FLOW-02**: Organizer/archivist ant reports stale files, dead code, orphaned configs (report-only, conservative) — *Validated: /ant:organize command spawning architect-ant with triple-layer safety*
- [x] **FLOW-03**: Pheromone user documentation — when/why to use FOCUS, REDIRECT, FEEDBACK with practical scenarios — *Validated: .aether/docs/pheromones.md (213 lines, 9 scenarios, sensitivity matrix)*

## v2 Requirements

Deferred to future release. Tracked but not in current roadmap.

### Distribution

- **DIST-01**: Installable NPM package for global install
- **DIST-02**: Deployment model for external repos (.aether/ bootstrapping)
- **DIST-03**: Auto-update mechanism for published changes

### Advanced Colony

- **ADV-01**: Unlimited recursive delegation (beyond depth 2)
- **ADV-02**: Agent-to-agent direct messaging
- **ADV-03**: Auto-promote learnings to global tier without user approval

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| BUG-01 | Phase 27 | Complete |
| BUG-02 | Phase 27 | Complete |
| BUG-03 | Phase 27 | Complete |
| BUG-04 | Phase 27 | Complete |
| INT-02 | Phase 27 | Complete |
| UX-01 | Phase 28 | Complete |
| UX-02 | Phase 28 | Complete |
| FLOW-01 | Phase 28 | Complete |
| INT-01 | Phase 29 | Complete |
| INT-03 | Phase 29 | Complete |
| INT-04 | Phase 29 | Complete |
| INT-05 | Phase 29 | Complete |
| INT-07 | Phase 29 | Complete |
| ARCH-03 | Phase 29 | Complete |
| AUTO-01 | Phase 30 | Complete |
| AUTO-02 | Phase 30 | Complete |
| AUTO-03 | Phase 30 | Complete |
| AUTO-04 | Phase 30 | Complete |
| AUTO-05 | Phase 30 | Complete |
| INT-06 | Phase 30 | Complete |
| ARCH-01 | Phase 31 | Complete |
| ARCH-02 | Phase 31 | Complete |
| FLOW-02 | Phase 32 | Complete |
| FLOW-03 | Phase 32 | Complete |

## Milestone Summary

**Shipped:** 24 of 24 v1 requirements
**Adjusted:** None -- all requirements shipped as originally specified
**Dropped:** None

---
*Archived: 2026-02-05 as part of v4.4 milestone completion*
