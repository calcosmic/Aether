# Requirements Archive: v5.1 System Simplification

**Archived:** 2026-02-06
**Status:** SHIPPED

This is the archived requirements specification for v5.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v5.1 Requirements

Requirements derived from postmortem Section 5 (Recommended Fixes), ordered by severity.

### Critical Priority

- [x] **SIMP-01**: Consolidate 6 state files into single COLONY_STATE.json
  - Merge: COLONY_STATE, PROJECT_PLAN, pheromones, memory, errors, events
  - One read, one write per command
  - Event log as append-only strings within the file
  - **Outcome:** Validated — 103 COLONY_STATE.json refs across 15 commands

- [x] **SIMP-02**: Move state updates from end-of-command to start-of-next-command
  - /ant:build writes "EXECUTING" state only
  - /ant:continue detects completed output files and updates state
  - Prevents state loss at context boundaries
  - **Outcome:** Validated — state survives context boundaries

### High Priority

- [x] **SIMP-03**: Replace pheromone exponential decay with simple TTL
  - Signals use `expires_at` timestamp instead of half-life math
  - Priority field: "high" (REDIRECT), "normal" (FOCUS), "low" (FEEDBACK)
  - Filter expired signals on read, no cleanup command needed
  - Remove all sensitivity matrices from worker specs
  - **Outcome:** Validated — all signals use priority + expires_at

- [x] **SIMP-04**: Collapse 6 worker specs into single workers.md (~200 lines)
  - Preserve role concept (colonizer, scout, builder, watcher, architect, route-setter)
  - Remove sensitivity matrices, spawning protocols, visual identity systems
  - Include assignment guidelines
  - **Outcome:** Validated — 1,866 lines → 171 lines (91% reduction)

- [x] **SIMP-05**: Shrink command files by 60-70%
  - Remove verbose display templates (let agent format naturally)
  - Remove redundant per-step state validation
  - Remove Bayesian spawn tracking
  - Remove step-by-step progress templates
  - Target: ~100 lines average (from ~340)
  - **Outcome:** Validated — 66% reduction in build+continue

### Medium Priority

- [x] **SIMP-06**: Reduce aether-utils.sh from 372 lines to ~80 lines
  - Keep: validate-state, error-add
  - Remove: pheromone math (decay, effective, batch, cleanup, validate)
  - Remove: memory compression, spawn check
  - Inline trivial operations (error summary, activity logging)
  - **Outcome:** Validated — 372 → 87 lines

- [x] **SIMP-07**: Adopt output-as-state for build results
  - `.planning/phase-N/SUMMARY.md` existence = phase complete
  - State file tracks only: current phase number, colony goal, active signals
  - /ant:continue reads output files to determine completion
  - **Outcome:** Validated — SUMMARY.md existence = completion

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| SIMP-01 | Phase 33 | Complete |
| SIMP-02 | Phase 34 | Complete |
| SIMP-03 | Phase 36, 38, 40 | Complete |
| SIMP-04 | Phase 35 | Complete |
| SIMP-05 | Phase 34, 37 | Complete |
| SIMP-06 | Phase 37 | Complete |
| SIMP-07 | Phase 34 | Complete |

**Coverage:**
- v5.1 requirements: 7 total
- Shipped: 7/7
- Adjusted: 0
- Dropped: 0

---

## Milestone Summary

**Shipped:** 7 of 7 requirements
**Adjusted:** None
**Dropped:** None

All requirements derived from the M4L-AnalogWave postmortem were successfully implemented. The postmortem's recommended implementation order (state first, then commands, then infrastructure) was followed exactly.

---

*Archived: 2026-02-06 as part of v5.1 milestone completion*
